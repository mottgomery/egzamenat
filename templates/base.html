<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{% block title %}{% endblock %}</title>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
<link rel="icon" type="image/x-icon" href="static/img/logo.ico">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

{% block head %}{% endblock %}
</head>
<body class="fade-in">
<div class="w3-top">
  <div class="w3-bar w3-white w3-card" id="myNavbar">
    <a href="/" class="d-inline-flex link-body-emphasis text-decoration-none">
            <img class="heder__img" src="{{ url_for('static', filename='img/logo.png') }}" alt="Логотип">
    </a>
    <div class="w3-right w3-hide-small">

      <a href="{{ url_for('search') }}" class="w3-bar-item w3-button nav-link"><i class="fa fa-search"></i></a>
      <a href="/" class="w3-bar-item w3-button nav-link">Главная</a>
      <a href="{{ url_for('posts') }}" class="w3-bar-item w3-button nav-link"> Все задачи</a>
      <a href="{{ url_for('all_tests') }}" class="w3-bar-item w3-button nav-link"> Все тесты</a>
      <a href="{{ url_for('create') }}" class="w3-bar-item w3-button nav-link">Добавить задачу</a>
      {% if current_user.role == 'admin' or current_user.role == 'teacher' %}
        <a href="{{ url_for('view_tests') }}" class="w3-bar-item w3-button nav-link"> Мои тесты</a>
      {% endif %}
      <a href="{{ url_for('forum') }}" class="w3-bar-item w3-button nav-link">Форум</a>
      {% if current_user.role == 'admin' %}
        <a href="{{ url_for('register_teacher') }}" class="w3-bar-item w3-button nav-link"> Панель администратора</a>
      {% endif %}
      <a href="{{ url_for('about') }}" class="w3-bar-item w3-button nav-link"> О нас</a>
      {% if current_user.is_authenticated %}
         <a href="{{ url_for('logout') }}" class="w3-bar-item w3-button nav-link">Выйти</a>
      {% else %}
         <a href="{{ url_for('login') }}" class="w3-bar-item w3-button nav-link">Войти</a>
      {% endif %}

      <button type="button" class="w3-bar-item w3-button" id="themeToggle">Тёмная тема</button>
  </div>

    <a href="javascript:void(0)" class="w3-bar-item w3-button w3-right w3-hide-large w3-hide-medium" onclick="w3_open()">
      <i class="fa fa-bars"></i>
    </a>
  </div>
</div>

<nav class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left w3-hide-medium w3-hide-large" style="display:none" id="mySidebar">
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16">Закрыть ×</a>
  <a href="{{ url_for('search') }}" class="w3-bar-item w3-button nav-link"><i class="fa fa-search"></i></a>
  <a href="/" onclick="w3_close()" class="w3-bar-item w3-button">Главная</a>
  <a href="{{ url_for('posts') }}" onclick="w3_close()" class="w3-bar-item w3-button">Все задачи</a>
  <a href="{{ url_for('all_tests') }}" class="w3-bar-item w3-button nav-link"> Все тесты</a>
  <a href="{{ url_for('create') }}" onclick="w3_close()" class="w3-bar-item w3-button">Добавить задачу</a>
  {% if current_user.role == 'admin' or current_user.role == 'teacher' %}
    <a href="{{ url_for('view_tests') }}" class="w3-bar-item w3-button nav-link"> Мои тесты</a>
  {% endif %}
  {% if current_user.role == 'admin' %}
    <a href="{{ url_for('register_teacher') }}" onclick="w3_close()" class="w3-bar-item w3-button">Панель администратора</a>
  {% endif %}
  <a href="{{ url_for('forum') }}" class="w3-bar-item w3-button nav-link">Форум</a>
  <a href="{{ url_for('about') }}" onclick="w3_close()" class="w3-bar-item w3-button">О нас</a>
  {% if current_user.is_authenticated %}
      <a href="{{ url_for('logout') }}" class="w3-bar-item w3-button">Выйти</a>
  {% else %}
      <a href="{{ url_for('login') }}" class="w3-bar-item w3-button">Войти</a>
  {% endif %}
      <button type="button" class="w3-bar-item w3-button" id="themeToggle">Тёмная тема</button>
</nav>

<div class="page">
{% block content1 %}
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <p></p>

        {% block content %}{% endblock %}
    </div>

{% endblock %}

<!-- Footer -->
<footer class="w3-center w3-black w3-padding-64">
  <a href="#top" class="w3-button w3-light-grey"><i class="fa fa-arrow-up w3-margin-right"></i>Наверх</a>
  <div class="w3-xlarge w3-section">
    <i class="fa fa-facebook-official w3-hover-opacity"></i>
    <i class="fa fa-instagram w3-hover-opacity"></i>
    <i class="fa fa-snapchat w3-hover-opacity"></i>
    <i class="fa fa-pinterest-p w3-hover-opacity"></i>
    <i class="fa fa-twitter w3-hover-opacity"></i>
    <i class="fa fa-linkedin w3-hover-opacity"></i>
  </div>
  <p>Почта для связи <a href="mailto:mangoganes@gmail.com" title="почта - -- -" target="_blank" class="w3-hover-text-green">mangoganes@gmail.com</a></p>
</footer>




<script>

function acceptCookies() {
            fetch('/accept-cookies')
                .then(response => response.text())
                .then(() => {
                    document.getElementById("cookie-banner").style.display = "none";
                })
                .catch(error => console.error("Ошибка:", error));
        }



// Modal Image Gallery
function onClick(element) {
  document.getElementById("img01").src = element.src;
  document.getElementById("modal01").style.display = "block";
  var captionText = document.getElementById("caption");
  captionText.innerHTML = element.alt;
}

// Toggle between showing and hiding the sidebar when clicking the menu icon
var mySidebar = document.getElementById("mySidebar");

function w3_open() {
  if (mySidebar.style.display === 'block') {
    mySidebar.style.display = 'none';
  } else {
    mySidebar.style.display = 'block';
  }
}

// Close the sidebar with the close button
function w3_close() {
    mySidebar.style.display = "none";
}

// Проверка сохранённой темы при загрузке страницы
    document.addEventListener('DOMContentLoaded', function() {
        if (localStorage.getItem('theme') === 'dark') {
            document.body.classList.add('dark-theme');
            document.getElementById('themeToggle').textContent = 'Светлая тема';
        }
    });

    // Переключение темы и сохранение выбора
    document.getElementById('themeToggle').addEventListener('click', function() {
        document.body.classList.toggle('dark-theme');
        const isDark = document.body.classList.contains('dark-theme');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        this.textContent = isDark ? 'Светлая тема' : 'Тёмная тема';
        if (isDark) {
            document.body.classList.add('dark-transition');
        } else {
            document.body.classList.add('light-transition');
        }
        setTimeout(() => {
            document.body.classList.remove('dark-transition', 'light-transition');
        }, 500);
    });

// Анимация перехода между страницами
window.addEventListener('beforeunload', () => {
    document.body.classList.add('fade-out');
    });
    document.addEventListener('DOMContentLoaded', function() {
        const solutionToggle = document.getElementById('toggleSolution');
        const solutionContainer = document.getElementById('solutionContainer');
        solutionToggle.addEventListener('click', function() {
            const isHidden = solutionContainer.style.display === 'none';
            solutionContainer.style.display = isHidden ? 'block' : 'none';
            solutionToggle.textContent = isHidden ? 'Скрыть ответ' : 'Показать ответ';
        });
    });


    const deleteButton = document.getElementById('deleteButton');
    deleteButton.addEventListener('click', function () {
        if (confirm('Вы уверены, что хотите удалить задачу?')) {
            document.getElementById('deleteForm').submit();  // Отправляем форму с POST-запросом
        }


});
    document.addEventListener('DOMContentLoaded', function () {
    const enableSelectionButton = document.getElementById('enableSelection');
    const createTestButton = document.getElementById('createTest');
    const taskCheckboxes = document.querySelectorAll('.task-checkbox');

    enableSelectionButton.addEventListener('click', function () {
        taskCheckboxes.forEach(checkbox => {
            checkbox.classList.toggle('d-none'); // Показать или скрыть чекбоксы
        });
        createTestButton.disabled = false; // Активировать кнопку формирования теста
    });

    createTestButton.addEventListener('click', function () {
        const selectedTasks = Array.from(taskCheckboxes)
            .filter(checkbox => checkbox.checked)
            .map(checkbox => checkbox.value);

        if (selectedTasks.length === 0) {
            alert('Выберите хотя бы одну задачу для теста.');
            return;
        }

        // Открыть модальное окно для формирования теста
        const modal = new bootstrap.Modal(document.getElementById('testModal'));
        modal.show();

        // Отобразить выбранные задачи в модальном окне
        const selectedTasksContainer = document.getElementById('selectedTasks');
        selectedTasksContainer.innerHTML = '';
        selectedTasks.forEach(taskId => {
            selectedTasksContainer.innerHTML += `<li>Задача ID: ${taskId}</li>`;
        });
    });
});

</script>

</body>
</html>



